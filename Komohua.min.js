"use strict";const KomohuaConvertToOkina={label:"Convert to ʻokina",tooltip:"Convert tick, backtick, and left single quote characters to the ʻokina in the selected text (or all if nothing is selected)",action:function(t,e,n){t.replaceText(e,/[`'‘’]/g,"ʻ")}},Komohua=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this;this.inputs=[],this.containers=[],this.footprint="aia-o-komohua",this.skip_class="skip-komohua-injectors",n.defaults={container:null,containerClass:"komohua-container",containerClassExtra:"",containerBeforeInput:!1,containerTag:"span",helpers:[],helpersClass:"komohua-helper",injectorCallbackAfter:(t,e)=>{},injectorCallbackBefore:(t,e)=>!0,injectorClass:"komohua-injector",injectorClassExtra:"",items:"ʻĀĒĪŌŪāēīōū".split(""),skipAhead:null,skipBehind:null},n.settings=Object.assign({},n.defaults,e||{});let s=[];"string"==typeof t?s=Array.prototype.slice.call(document.querySelectorAll(t)):t&&t instanceof NodeList?s=Array.prototype.slice.call(t):t&&t instanceof Node?s=[t]:t instanceof Array&&(s=t);const i=(t,e)=>{const n=document.createElement("button");return n.setAttribute("type","button"),n.setAttribute("class",e),n.textContent=t,n};s.forEach((t=>{if(t.classList.contains(n.footprint))return;if(n.settings.items.length+n.settings.helpers.length<1)return;if("number"!=typeof t.selectionStart)return;let e=n.settings.container&&n.settings.container.nodeType===Node.ELEMENT_NODE;if("string"==typeof n.settings.container&&(n.settings.container=document.querySelector(n.settings.container),e=!0),n.settings.container&&n.settings.container instanceof Node&&n.settings.container.nodeType===Node.ELEMENT_NODE||(n.settings.container=document.createElement(n.settings.containerTag),n.settings.container.setAttribute("class",n.settings.containerClass+" "+(n.settings.containerBeforeInput?"before":"after")+" "+n.settings.containerClassExtra)),n.settings.skipAhead){let t=document.createElement("button");t.type="button",t.textContent=n.settings.skipAhead.text||"skip ahead",t.setAttribute("class","".concat(n.skip_class," ").concat(n.settings.skipAhead.classes||n.settings.injectorClass)),t.addEventListener("click",(()=>n.findNextTabStop(n.settings.container.childNodes[n.settings.container.childNodes.length-1]).focus())),n.settings.container.append(t)}if(n.settings.items.forEach((t=>{n.settings.container.append(i(t,(n.settings.injectorClass+" "+n.settings.injectorClassExtra).trim()))})),n.settings.helpers instanceof Array&&n.settings.helpers.forEach((e=>{const s=i(e.label,(n.settings.helpersClass+" "+(e.classes||"")).trim());s.setAttribute("title",e.tooltip),s.addEventListener("click",(s=>{s.preventDefault(),e.action(n,t,s.target)})),n.settings.container.append(s)})),n.settings.skipBehind){let t=document.createElement("button");t.type="button",t.textContent=n.settings.skipBehind.text||"skip back",t.setAttribute("class","".concat(n.skip_class," ").concat(n.settings.skipBehind.classes||n.settings.injectorClass)),t.addEventListener("click",(()=>n.findPreviousTabStop(n.settings.container.childNodes[0]).focus())),n.settings.container.append(t)}e||t.parentNode.insertBefore(n.settings.container,n.settings.containerBeforeInput?t:t.nextSibling),n.settings.container.addEventListener("click",(e=>{e.target.classList.contains(n.settings.injectorClass)&&!e.target.classList.contains(n.skip_class)&&(e.preventDefault(),(!n.settings.injectorCallbackBefore||"function"==typeof n.settings.injectorCallbackBefore&&n.settings.injectorCallbackBefore(t,e.target.textContent))&&(n.injectText(t,e.target.textContent),"function"==typeof n.settings.injectorCallbackAfter&&n.settings.injectorCallbackAfter(t,e.target.textContent)))})),t.classList.add(n.footprint),n.inputs.push(t),n.containers.push(n.settings.container)}))};Komohua.prototype.injectText=function(t,e){const n=t.selectionStart,s=t.value.substring(0,n),i=t.value.substring(t.selectionEnd,t.value.length);t.value=s+e+i,t.selectionStart=n+e.length,t.selectionEnd=t.selectionStart,t.focus()},Komohua.prototype.remove=function(){this.containers.forEach((t=>t.remove())),this.inputs.forEach((t=>t.classList&&t.classList.remove(this.footprint)))},Komohua.prototype.replaceText=function(t,e,n){let s=t.selectionStart,i=t.selectionEnd;s===i&&(s=0,i=t.value.length);const o=t.value.substring(s,i).replace(e,n);t.value=t.value.substring(0,s)+o+t.value.substring(i,t.value.length),t.selectionStart=s+o.length,t.selectionEnd=t.selectionStart,t.focus()},Komohua.prototype.findNextTabStop=function(t){const e=document.querySelectorAll("input, button, select, textarea, a[href]"),n=Array.prototype.filter.call(e,(t=>t.tabIndex>="0")),s=n.indexOf(t);return n[s+1]||n[0]},Komohua.prototype.findPreviousTabStop=function(t){const e=document.querySelectorAll("input, button, select, textarea, a[href]"),n=Array.prototype.filter.call(e,(t=>t.tabIndex>="0")),s=n.indexOf(t);return n[s-1]||n[n.length-1]};